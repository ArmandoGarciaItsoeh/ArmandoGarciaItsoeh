<html>
  <head>
    <title>Probabilidad y Estadística</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css" />
    <script defer src="https://pyscript.net/latest/pyscript.js"></script>
  </head>
  <body>
    <p id="csv"></p>
    <py-config>
      packages = ["matplotlib", "pandas"]
    </py-config>

    <py-script>
      import numpy as np
      import pandas as pd
      from matplotlib import pyplot as plt
      from pyodide.http import open_url

      url_content = open_url("https://armandogarciaitsoeh.github.io/ArmandoGarciaItsoeh/Reg1.csv")
      df = pd.read_csv(url_content, names=['X', 'Y'])

      x = df.iloc[:,0].to_numpy()
      y = df.iloc[:,1].to_numpy()

      xm = x.mean()
      ym = y.mean()
      m = sum( (x - xm) * (y - ym) ) / sum((x - xm)**2)
      b = ym - m*xm

      xlinea = np.linspace(x.min(), x.max(), 30)
      ylinea = m*xlinea + b
      ley = "y = " + str(m) + " + " + str(b)
      plt.figure(figsize=(10,10))
      plt.title(label="Regresión Lineal. García Bautista Jorge Armando", fontsize=20 )
      plt.scatter(x,y, label = "Datos")
      plt.plot(xlinea, ylinea, label = ley, color = 'salmon')
      plt.legend()
      plt.xlabel("X")
      plt.ylabel("Y")
      display(plt, target="graph-area", append=False)
      display(df, target="csv", append=True)
    </py-script>

    <py-repl>
      
    </py-repl>

    <div id="graph-area"></div>
  </body>
</html>
